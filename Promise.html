<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise</title>
</head>
<body>
<script>
    let isMomHappy = 1;

    // promise
    const willGetNewPhone = new Promise((resolve, reject) => {
        if(isMomHappy){
            const phone = {
                name: 'Xiaomi',
                color: 'black'
            };
            resolve(phone);
        }else{
            const reason = new Error('Mom is not happy...');
            reject(reason);
        }
    });

    showOff = phone => {
        return new Promise((resolve, reject) => {
            const message = `Hey friend, I have a new phone: ${phone.color} ${phone.name}`;

            resolve(message);
        });
    }

    function askMom(){
        console.log('before ask mom');
        willGetNewPhone
            .then(showOff)
            .then(fulfilled => {
                console.log(fulfilled);
            })
            .catch(error => {
                console.log(error.message)
            });
        console.log('after ask mom');
    }

    // askMom();

    let promise = new Promise((resolve, reject) => {
        setTimeout(() => {resolve('Done !')}, 1000);
    });

    promise
        .then((result) => {
            console.log(result)
        })
        .finally(() => console.log('finaly-n ashxatec'));


    function delay(ms) {
        return new Promise(
            resolve => setTimeout(resolve, ms)
        );
    }

    delay(5000).then(() => alert('выполнилось через 5 секунды'));


    function showCircle(cx, cy, radius) {
        let div = document.createElement('div');
        div.style.width = 0;
        div.style.height = 0;
        div.style.left = cx + 'px';
        div.style.top = cy + 'px';
        div.className = 'circle';
        document.body.append(div);

        setTimeout(() => {
            div.style.width = radius * 2 + 'px';
            div.style.height = radius * 2 + 'px';

            div.addEventListener('transitionend', function handler() {
                div.removeEventListener('transitionend', handler);
                // callback(div);
            });
        }, 0);
    }
    showCircle(150, 150, 100, div => {
        div.classList.add('message-ball');
        div.append("Hello, world!");
    });
</script>
</body>
</html>



